import{_ as y,s as b,o as a,c,b as e,bC as i,br as n,F as p,aS as f,N as k,a as m,bF as w,bn as v,b6 as F,p as U,d as I}from"./index-BjJSz9nM.js";const A={data(){return{areas:[],courses:[],selectedAreas:{},selectedCourses:{},uploadProgress:{},showBankPhoto:!1,showIdcPh:!1,showIdcPh1:!1,showSalesPh:!1,teacherForm:{id:"",name:"",Alias:"",birthday:"",idcard:"",mail:"",area:"",course:"",phone:"",LineID:"",registration_add:"",live_add:"",bank_code:"",bank_account:"",bank_name:"",bank_ph:"",idc_ph:"",idc_ph1:"",sales_ph:"",team:"",created_at:""},teacherData:[]}},mounted(){this.areas=this.$store.state.data.set[0].area||[],this.courses=this.$store.state.data.set[0].course||[],this.teacherData=this.$store.state.user,this.fetchAndFillData()},methods:{async signOut(){if(confirm("您确定要登出吗？"))try{const{error:l}=await b.auth.signOut();if(l)throw l;this.$store.commit("resetState"),console.log("登出成功")}catch(l){console.error("登出失败",l.message)}},async fetchAndFillData(){try{const l=this.teacherData;console.log("data:",l),l&&(this.teacherForm={...this.teacherForm,...l},console.log(this.teacherForm),this.resetMultiSelectModels(),l.area&&Array.isArray(l.area)&&l.area.forEach(s=>{this.areas.includes(s)&&(this.selectedAreas[s]=!0)}),l.course&&Array.isArray(l.course)&&l.course.forEach(s=>{this.courses.includes(s)&&(this.selectedCourses[s]=!0)}))}catch(l){console.error("读取数据时发生错误:",l)}},resetMultiSelectModels(){this.areas.forEach(l=>{this.selectedAreas[l]=!1}),this.courses.forEach(l=>{this.selectedCourses[l]=!1})},async saveTeacherData(){try{const l=Object.keys(this.selectedAreas).filter(d=>this.selectedAreas[d]),s=Object.keys(this.selectedCourses).filter(d=>this.selectedCourses[d]),{data:g,error:_}=await b.from("teacher").upsert({id:this.teacherForm.id,name:this.teacherForm.name,Alias:this.teacherForm.Alias,birthday:this.teacherForm.birthday,idcard:this.teacherForm.idcard,mail:this.teacherForm.mail,area:l,course:s,phone:this.teacherForm.phone,LineID:this.teacherForm.LineID,registration_add:this.teacherForm.registration_add,live_add:this.teacherForm.live_add,bank_code:this.teacherForm.bank_code,bank_account:this.teacherForm.bank_account,bank_name:this.teacherForm.bank_name,team:this.teacherForm.team,created_at:new Date().toISOString()});if(_)throw _;let{data:t,error:h}=await b.from("teacher").select().eq("mail",this.$store.state.user.mail);console.log(this.$store.state.user.mail);const o=t[0];this.$store.commit("setUser",o),alert("教师数据保存成功！"),await this.$store.dispatch("fetchDataFromItems",["teacher"])}catch(l){console.error("保存教师数据出错:",l),alert("保存教师数据出错")}},async handleFileUpload(l,s){alert("卡關中 暫時跳過")}},computed:{}},r=l=>(U("data-v-ef239697"),l=l(),I(),l),C={style:{width:"95%"}},D={class:"row h-100"},V={class:"col-md-8 h-100 overflow-auto"},P={class:"row"},S={class:"col-md-6"},x={class:"row g-3 align-items-center mb-3"},L=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher0",class:"form-label"},"老師姓名")],-1)),B={class:"col"},M={class:"row g-3 align-items-center mb-3"},O=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher1",class:"form-label"},"老師暱稱")],-1)),T={class:"col"},E={class:"row g-3 align-items-center mb-3"},N=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher2",class:"form-label"},"出生日期")],-1)),j={class:"col"},q={class:"row g-3 align-items-center mb-3"},z=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher3",class:"form-label"},"身份證號")],-1)),G={class:"col"},H={class:"row g-3 align-items-center mb-3"},J=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher4",class:"form-label"},"電子郵件")],-1)),K={class:"col"},Q={class:"row g-3 align-items-center mb-3"},R=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher18",class:"form-label"},"Line ID")],-1)),W={class:"col"},X={class:"row g-3 align-items-center mb-3"},Y=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher7",class:"form-label"},"聯繫電話")],-1)),Z={class:"col"},$={class:"col-md-6"},ee={class:"row g-3 align-items-center mb-3"},se=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher8",class:"form-label"},"戶籍地址")],-1)),te={class:"col"},oe={class:"row g-3 align-items-center mb-3"},le=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher9",class:"form-label"},"居住地址")],-1)),re={class:"col"},ae={class:"row g-3 align-items-center mb-3"},ce=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher10",class:"form-label"},"銀行代號")],-1)),ie={class:"col"},ne={class:"row g-3 align-items-center mb-3"},de=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher11",class:"form-label"},"匯款賬號")],-1)),he={class:"col"},me={class:"row g-3 align-items-center mb-3"},_e=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher12",class:"form-label"},"立賬分行")],-1)),ue={class:"col"},be={class:"row g-3 align-items-center mb-3"},pe=r(()=>e("div",{class:"col-auto"},[e("label",{for:"teacher17",class:"form-label"},"團隊名稱")],-1)),fe={class:"col"},ve={class:"col"},Fe={class:"mb-3"},ge=r(()=>e("label",{class:"form-label"},"地區",-1)),ye={class:"row"},ke=["id","onUpdate:modelValue"],we=["for"],Ue={class:"mb-2"},Ie=r(()=>e("label",{class:"form-label"},"教授課程",-1)),Ae={class:"row"},Ce=["id","onUpdate:modelValue"],De=["for"],Ve=r(()=>e("br",null,null,-1)),Pe={class:"text-center"},Se={class:"row justify-content-md-center"},xe={class:"col-md-auto"},Le=r(()=>e("div",{class:"py-2"},"＊請填入及上傳正確信息，如因資料填寫錯誤造成會計無法對賬或是匯入薪資，請自行負責",-1)),Be=r(()=>e("br",null,null,-1)),Me=r(()=>e("br",null,null,-1)),Oe={class:"col-md-4 h-100 overflow-auto"},Te={class:"row g-3 align-items-center mb-3"},Ee=r(()=>e("div",{class:"col-3"},[e("label",{for:"teacher13",class:"form-label"},"帐户影本")],-1)),Ne={class:"col"},je={key:0},qe=["src"],ze={key:1},Ge={class:"row g-3 align-items-center mb-3"},He=r(()=>e("div",{class:"col-3"},[e("label",{for:"teacher14",class:"form-label"},"身份证正面影本")],-1)),Je={class:"col"},Ke={key:0},Qe=["src"],Re={key:1},We={class:"row g-3 align-items-center mb-3"},Xe=r(()=>e("div",{class:"col-3"},[e("label",{for:"teacher15",class:"form-label"},"身份证反面影本")],-1)),Ye={class:"col"},Ze={key:0},$e=["src"],es={key:1},ss={class:"row g-3 align-items-center mb-3"},ts=r(()=>e("div",{class:"col-3"},[e("label",{for:"teacher16",class:"form-label"},"业务签名")],-1)),os={class:"col"},ls={key:0},rs=["src"],as={key:1};function cs(l,s,g,_,t,h){return a(),c("div",C,[e("form",{onSubmit:s[23]||(s[23]=w((...o)=>l.saveTeacher&&l.saveTeacher(...o),["prevent"]))},[e("div",D,[e("div",V,[e("div",P,[e("div",S,[e("div",x,[L,e("div",B,[i(e("input",{id:"teacher0",type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>t.teacherForm.name=o),placeholder:"老師姓名（對賬使用，請勿亂填）"},null,512),[[n,t.teacherForm.name]])])]),e("div",M,[O,e("div",T,[i(e("input",{id:"teacher1",type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>t.teacherForm.Alias=o),placeholder:"老師暱稱"},null,512),[[n,t.teacherForm.Alias]])])]),e("div",E,[N,e("div",j,[i(e("input",{id:"teacher2",type:"date",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>t.teacherForm.birthday=o)},null,512),[[n,t.teacherForm.birthday]])])]),e("div",q,[z,e("div",G,[i(e("input",{id:"teacher3",type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>t.teacherForm.idcard=o),placeholder:"身份證號"},null,512),[[n,t.teacherForm.idcard]])])]),e("div",H,[J,e("div",K,[i(e("input",{id:"teacher4",type:"email",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>t.teacherForm.mail=o),placeholder:"電子郵件"},null,512),[[n,t.teacherForm.mail]])])]),e("div",Q,[R,e("div",W,[i(e("input",{id:"teacher18",type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>t.teacherForm.LineID=o),placeholder:"Line ID"},null,512),[[n,t.teacherForm.LineID]])])]),e("div",X,[Y,e("div",Z,[i(e("input",{id:"teacher7",type:"tel",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.teacherForm.phone=o),placeholder:"聯繫電話"},null,512),[[n,t.teacherForm.phone]])])])]),e("div",$,[e("div",ee,[se,e("div",te,[i(e("input",{id:"teacher8",type:"text",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=o=>t.teacherForm.registration_add=o),placeholder:"戶籍地址"},null,512),[[n,t.teacherForm.registration_add]])])]),e("div",oe,[le,e("div",re,[i(e("input",{id:"teacher9",type:"text",class:"form-control","onUpdate:modelValue":s[8]||(s[8]=o=>t.teacherForm.live_add=o),placeholder:"居住地址"},null,512),[[n,t.teacherForm.live_add]])])]),e("div",ae,[ce,e("div",ie,[i(e("input",{id:"teacher10",type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=o=>t.teacherForm.bank_code=o),placeholder:"銀行代號"},null,512),[[n,t.teacherForm.bank_code]])])]),e("div",ne,[de,e("div",he,[i(e("input",{id:"teacher11",type:"text",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=o=>t.teacherForm.bank_account=o),placeholder:"匯款賬號"},null,512),[[n,t.teacherForm.bank_account]])])]),e("div",me,[_e,e("div",ue,[i(e("input",{id:"teacher12",type:"text",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=o=>t.teacherForm.bank_name=o),placeholder:"立賬分行"},null,512),[[n,t.teacherForm.bank_name]])])]),e("div",be,[pe,e("div",fe,[i(e("input",{id:"teacher17",type:"text",class:"form-control","onUpdate:modelValue":s[12]||(s[12]=o=>t.teacherForm.team=o),placeholder:"個人老師可跳過"},null,512),[[n,t.teacherForm.team]])])])])]),e("div",ve,[e("div",Fe,[ge,e("div",ye,[(a(!0),c(p,null,f(t.areas,(o,d)=>(a(),c("div",{class:"col-md-2",key:"area-"+d},[i(e("input",{id:"area-"+d,type:"checkbox",class:"form-check-input","onUpdate:modelValue":u=>t.selectedAreas[o]=u},null,8,ke),[[v,t.selectedAreas[o]]]),e("label",{for:"area-"+d,class:"form-check-label"},F(o),9,we)]))),128))])]),e("div",Ue,[Ie,e("div",Ae,[(a(!0),c(p,null,f(t.courses,(o,d)=>(a(),c("div",{class:"col-md-2",key:"course-"+d},[i(e("input",{id:"course-"+d,type:"checkbox",class:"form-check-input","onUpdate:modelValue":u=>t.selectedCourses[o]=u},null,8,Ce),[[v,t.selectedCourses[o]]]),e("label",{for:"course-"+d,class:"form-check-label"},F(o),9,De)]))),128))])]),Ve,e("div",Pe,[e("div",Se,[e("div",xe,[Le,e("button",{onClick:s[13]||(s[13]=(...o)=>h.saveTeacherData&&h.saveTeacherData(...o)),class:"btn btn-primary"},"保存"),Be,k(),Me,e("button",{onClick:s[14]||(s[14]=(...o)=>h.signOut&&h.signOut(...o)),class:"btn btn-danger"},"登出")])])])])]),e("div",Oe,[e("div",Te,[Ee,e("div",Ne,[e("input",{class:"form-control",type:"file",id:"teacher13",onChange:s[15]||(s[15]=o=>h.handleFileUpload("bank_ph",this.teacherForm.id))},null,32),t.teacherForm.bank_ph?(a(),c("div",je,[t.showBankPhoto?m("",!0):(a(),c("button",{key:0,onClick:s[16]||(s[16]=o=>t.showBankPhoto=!0)},"显示帐户影本")),t.showBankPhoto?(a(),c("img",{key:1,src:t.teacherForm.bank_ph,class:"img-thumbnail",alt:"帐户影本"},null,8,qe)):m("",!0)])):(a(),c("div",ze,"尚无上传"))])]),e("div",Ge,[He,e("div",Je,[e("input",{class:"form-control",type:"file",id:"teacher14",onChange:s[17]||(s[17]=o=>h.handleFileUpload("idc_ph",this.teacherForm.id))},null,32),t.teacherForm.idc_ph?(a(),c("div",Ke,[t.showIdcPh?m("",!0):(a(),c("button",{key:0,onClick:s[18]||(s[18]=o=>t.showIdcPh=!0)},"显示身份证正面影本")),t.showIdcPh?(a(),c("img",{key:1,src:t.teacherForm.idc_ph,class:"img-thumbnail",alt:"身份证正面影本"},null,8,Qe)):m("",!0)])):(a(),c("div",Re,"尚无上传"))])]),e("div",We,[Xe,e("div",Ye,[e("input",{class:"form-control",type:"file",id:"teacher15",onChange:s[19]||(s[19]=o=>h.handleFileUpload("idc_ph1",this.teacherForm.id))},null,32),t.teacherForm.idc_ph1?(a(),c("div",Ze,[t.showIdcPh1?m("",!0):(a(),c("button",{key:0,onClick:s[20]||(s[20]=o=>t.showIdcPh1=!0)},"显示身份证反面影本")),t.showIdcPh1?(a(),c("img",{key:1,src:t.teacherForm.idc_ph1,class:"img-thumbnail",alt:"身份证反面影本"},null,8,$e)):m("",!0)])):(a(),c("div",es,"尚无上传"))])]),e("div",ss,[ts,e("div",os,[e("input",{class:"form-control",type:"file",id:"teacher16",onChange:s[21]||(s[21]=o=>h.handleFileUpload("sales_ph",this.teacherForm.id))},null,32),t.teacherForm.sales_ph?(a(),c("div",ls,[t.showSalesPh?m("",!0):(a(),c("button",{key:0,onClick:s[22]||(s[22]=o=>t.showSalesPh=!0)},"显示业务签名")),t.showSalesPh?(a(),c("img",{key:1,src:t.teacherForm.sales_ph,class:"img-thumbnail",alt:"业务签名"},null,8,rs)):m("",!0)])):(a(),c("div",as,"尚无上传"))])])])])],32)])}const ns=y(A,[["render",cs],["__scopeId","data-v-ef239697"]]);export{ns as default};
